# GitHub Copilotと作る Pythonで OpenGL 3Dプログラミング

ブログ記事シリーズの計画書

## 概要

PythonでOpenGL(GLFW)を使った3Dプログラミングを、ステップバイステップで学ぶブログシリーズ。
各フェーズで段階的にコードを拡張していく形式で進める。

## フェーズ構成

| Phase | タイトル                  | サブタイトル                              |
| ----- | ------------------------- | ----------------------------------------- |
| 0     | はじめに                  | 第0回「このシリーズについて」             |
| 1     | 環境構築                  | 第1回「開発環境を整えよう」               |
| 2     | GLFWウィンドウ作成        | 第2回「GLFWでウィンドウを作る」           |
| 3     | imgui基礎                 | 第3回「imguiを組み込む」                  |
| 4     | シェーダー入門            | 第4回「虹色の三角形を描く」               |
| 5a    | 座標変換の基礎            | 第5回「座標変換の基礎」                   |
| 5b    | 2D/3Dカメラ               | 第6回「2D/3Dカメラの実装」                |
| 5c    | マウスでカメラ操作        | 第7回「マウスでカメラ操作」               |
| 6a    | 基本形状描画              | 第8回「点・線・三角形を描く」             |
| 6b    | 複合形状描画              | 第9回「立方体と球体を描く」               |
| 7a    | 高速化 - バッチ描画       | 第10回「バッチ描画で高速化」              |
| 7b    | 高速化 - インスタンシング | 第11回「インスタンシングで大量描画」      |
| 8     | テクスチャ                | 第12回「テクスチャマッピング」            |
| 9     | ライティング              | 第13回「ライティングの基礎」              |
| 10    | imgui応用                 | 第14回「imguiで作るシーンエディタ」       |
| 11    | 3Dモデル読み込み          | 第15回「3Dモデルの読み込み」              |
| 12    | 応用エフェクト            | 第16回「応用エフェクト集」                |

## 各フェーズの詳細

### Phase 0: はじめに
- このシリーズの趣旨と目標
- GitHub Copilotを活用した開発スタイルの紹介
- 対象読者と前提知識
- シリーズ全体の流れ
- サンプルコードの入手方法（GitHubリポジトリ）

### Phase 1: 環境構築
- Python仮想環境(venv)の作成
- 必要パッケージのインストール（glfw, PyOpenGL, numpy, imgui-bundle）
- 動作確認

### Phase 2: GLFWウィンドウ作成
- GLFWの初期化
- ウィンドウ生成
- OpenGLコンテキストの取得
- イベントループの基礎
- キーボード・マウスコールバック

### Phase 3: imgui基礎
- imguiの初期化と終了処理
- 基本ウィジェット（ボタン、スライダー、テキスト入力）
- デバッグ情報の表示（FPS等）

### Phase 4: シェーダー入門
- シェーダーとは何か
- GLSL文法の基礎
- 頂点シェーダーの作成
- フラグメントシェーダーの作成
- シェーダーのコンパイルとリンク
- VBO/VAOの基礎
- 頂点データの定義（位置・色）
- 虹色の三角形を描画

### Phase 5a: 座標変換の基礎
- 座標系の理解（ローカル→ワールド→ビュー→クリップ→スクリーン）
- Model行列（移動・回転・スケール）
- View行列（カメラ位置・向き）
- Projection行列（透視投影）
- numpyによる行列計算
- Uniform変数でシェーダーに行列を渡す
- imguiでパラメータを調整

### Phase 5b: 2D/3Dカメラ
- 2Dカメラ（正射影）の実装
- 3Dカメラ（透視投影）の実装
- カメラモードの切り替え機能
- imguiでカメラモード選択UI

### Phase 5c: マウスでカメラ操作
- マウスドラッグでパン（平行移動）
- マウスドラッグで回転（3Dモード）
- マウスホイールでズーム
- キーボード修飾キーとの組み合わせ
- カメラ操作のリセット機能

### Phase 6a: 基本形状描画
- VBO (Vertex Buffer Object) の基礎
- VAO (Vertex Array Object) の概念
- 点の描画 (GL_POINTS)
- 線分の描画 (GL_LINES)
- 三角形の描画 (GL_TRIANGLES)

### Phase 6b: 複合形状描画
- インデックスバッファ (EBO) の使用
- 四角形の描画
- 立方体の頂点データ生成と描画
- 球体の頂点データ生成と描画
- 描画モードの活用

### Phase 7a: 高速化 - バッチ描画
- ドローコールのオーバーヘッド問題
- 複数オブジェクトの頂点データ統合
- 動的バッチング vs 静的バッチング
- パフォーマンス計測（imguiでFPS表示）

### Phase 7b: 高速化 - インスタンシング
- インスタンシングの概念
- glDrawArraysInstanced / glDrawElementsInstanced
- インスタンス属性（位置・色・スケールの配列）
- glVertexAttribDivisorの設定
- 大量オブジェクト（1000+）の描画デモ
- バッチ描画との比較

### Phase 8: テクスチャ
- テクスチャの読み込み
- UV座標の設定
- テクスチャマッピング
- テクスチャパラメータ（フィルタリング、ラッピング）

### Phase 9: ライティング
- ライティングモデルの基礎
- 法線ベクトル
- Phongシェーディング（環境光・拡散光・鏡面反射）
- 光源の種類（点光源、平行光源）
- マテリアル設定

### Phase 10: imgui応用
- 高度なUIレイアウト
- シーンエディタの作成
- リアルタイムパラメータ調整
- オブジェクト選択・操作

### Phase 11: 3Dモデル読み込み
- OBJファイル形式の理解
- メッシュデータの解析
- 頂点・インデックスデータへの変換
- モデルの描画

### Phase 12: 応用エフェクト
- 深度テスト
- ブレンディング（透明オブジェクト）
- フレームバッファ（オフスクリーンレンダリング）
- ポストプロセッシング
- シャドウマッピング入門

## Git運用ルール

### ワークフロー

1. 各フェーズ開始時にブランチを作成
2. サンプルコードを作成
3. ブログ記事を作成
4. GitHubにコミット
5. 記事公開時にタグ付け → mainにマージ
6. GitHubリリースを作成（記事URLとリリースノートを添付）

### ブランチ命名規則

```
phase{番号}/{英語キーワード}
```

| Phase | ブランチ名                 |
| ----- | -------------------------- |
| 1     | `phase1/environment-setup` |
| 2     | `phase2/glfw-window`       |
| 3     | `phase3/imgui-basics`      |
| 4     | `phase4/shader-triangle`   |
| 5a    | `phase5a/transform-basics` |
| 5b    | `phase5b/camera-2d-3d`     |
| 5c    | `phase5c/mouse-control`    |
| 6a    | `phase6a/primitive-shapes` |
| 6b    | `phase6b/complex-shapes`   |
| 7a    | `phase7a/batch-rendering`  |
| 7b    | `phase7b/instancing`       |
| 8     | `phase8/texturing`         |
| 9     | `phase9/lighting`          |
| 10    | `phase10/imgui-advanced`   |
| 11    | `phase11/model-loading`    |
| 12    | `phase12/advanced-effects` |

### タグ命名規則

```
v{番号}.0
```

例: `v1.0`, `v4a.0`, `v6b.0`

### GitHubリリース

- 各タグに対してリリースを作成
- リリースノートに以下を記載:
  - 対応するブログ記事のURL
  - このフェーズで追加された機能の概要
  - 動作確認済み環境

## ディレクトリ構成

```
PythonOpenGL/
├── packages.txt          # 依存パッケージ一覧
├── plan/
│   └── blog_phases.md    # この計画書
├── blog/
│   └── (各フェーズのブログ記事下書き)
└── src/
    └── main.py           # メインプログラム（段階的に拡張）
```

## 使用ライブラリ

- **glfw**: ウィンドウ管理・入力処理
- **PyOpenGL**: OpenGLバインディング
- **numpy**: 数値計算・行列操作
- **imgui-bundle**: デバッグUI・パラメータ調整
- **scipy**: 科学計算（必要に応じて）
- **mapbox_earcut**: ポリゴン三角形分割（必要に応じて）

## ブログ公開情報

### 公開先
- **はてなブログ**: https://an-embedded-engineer.hateblo.jp/
- 記法: Markdown

### はてなブログ固有の記法に関する注意
- 画像: フォトライフにアップロード後、`[f:id:ユーザー名:画像ID:plain]` 形式で埋め込み
- 記事リンク: URLを貼り付けるとカード形式で表示、または `[記事タイトル:embed:cite]`
- 目次: `[:contents]` で自動生成
- 脚注: `((脚注テキスト))` 形式

### 公開済み記事

| Phase | タイトル | 公開日 | タグ | URL |
|-------|----------|--------|-----|-----|
| 0 | このシリーズについて | 2025/11/29 | - | https://an-embedded-engineer.hateblo.jp/entry/2025/11/29/232629 |
| 1 | 開発環境を整えよう | 2025/11/29 | v1.0 | https://an-embedded-engineer.hateblo.jp/entry/2025/11/29/234119 |
| 2 | GLFWでウィンドウを作る | 2025/11/30 | v2.0 | https://an-embedded-engineer.hateblo.jp/entry/2025/11/30/000424 |
| 3 | imguiを組み込む | 2025/11/30 | v3.0 | https://an-embedded-engineer.hateblo.jp/entry/2025/11/30/003141 |
| 4 | シェーダー入門 - 虹色の三角形を描く | 2025/11/30 | v4.0 | https://an-embedded-engineer.hateblo.jp/entry/2025/11/30/031136 |
| 5a | 座標変換の基礎 | 2025/11/30 | v5a.0 | https://an-embedded-engineer.hateblo.jp/entry/2025/11/30/042100 |
